@model cinema_ui.Models.PromoCodeFormViewModel
@{
    ViewData["Title"] = Model.Id == 0 ? "Create Promo Code" : "Edit Promo Code";
    Layout = "_AdminLayout";
}

<div class="form-container">
    <form asp-action="@(Model.Id == 0 ? "CreatePromoCode" : "EditPromoCode")" method="post">
        <input type="hidden" asp-for="Id" />
        
        @if (!string.IsNullOrEmpty(Model.ErrorMessage))
        {
            <div class="alert alert-danger">@Model.ErrorMessage</div>
        }
        
        <div class="form-group">
            <label asp-for="Code">Code *</label>
            <input asp-for="Code" class="form-control" placeholder="e.g., SUMMER20" style="text-transform: uppercase;" />
            <span asp-validation-for="Code" class="text-danger"></span>
            <small>Unique code that customers will enter at checkout</small>
        </div>
        
        <div class="form-group">
            <label asp-for="Description">Description</label>
            <textarea asp-for="Description" class="form-control" rows="2" placeholder="e.g., Summer sale 20% off"></textarea>
        </div>
        
        <div class="form-row">
            <div class="form-group">
                <label asp-for="DiscountPercent">Discount Percent *</label>
                <input asp-for="DiscountPercent" type="number" step="1" min="1" max="100" class="form-control" />
                <span asp-validation-for="DiscountPercent" class="text-danger"></span>
            </div>
            
            <div class="form-group">
                <label asp-for="MaxDiscountAmount">Max Discount Amount ($)</label>
                <input asp-for="MaxDiscountAmount" type="number" step="0.01" min="0" class="form-control" placeholder="No limit" />
                <small>Maximum discount in dollars (optional)</small>
            </div>
        </div>
        
        <div class="form-row">
            <div class="form-group">
                <label asp-for="MaxUses">Max Uses</label>
                <input asp-for="MaxUses" type="number" min="1" class="form-control" placeholder="Unlimited" />
                <small>Total number of times this code can be used</small>
            </div>
            
            <div class="form-group">
                <label asp-for="MinPurchaseAmount">Min Purchase Amount ($)</label>
                <input asp-for="MinPurchaseAmount" type="number" step="0.01" min="0" class="form-control" placeholder="No minimum" />
                <small>Minimum order value to use this code</small>
            </div>
        </div>
        
        <div class="form-row">
            <div class="form-group">
                <label asp-for="ValidFrom">Valid From</label>
                <input asp-for="ValidFrom" type="date" class="form-control" />
                <small>Leave empty for immediate activation</small>
            </div>
            
            <div class="form-group">
                <label asp-for="ExpiresAt">Expires At</label>
                <input asp-for="ExpiresAt" type="date" class="form-control" />
                <small>Leave empty for no expiration</small>
            </div>
        </div>
        
        <div class="form-actions">
            <button type="submit" class="btn btn-primary">@(Model.Id == 0 ? "Create Promo Code" : "Save Changes")</button>
            <a asp-action="PromoCodes" class="btn btn-secondary">Cancel</a>
        </div>
    </form>
</div>

<style>
.form-container {
    max-width: 600px;
    background: var(--card-bg);
    border: 1px solid var(--border-color);
    border-radius: var(--radius);
    padding: var(--spacing-lg);
}

.form-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: var(--spacing-md);
}

.form-group {
    margin-bottom: var(--spacing-md);
}

.form-group label {
    display: block;
    margin-bottom: var(--spacing-xs);
    font-weight: 500;
}

.form-group small {
    color: var(--text-muted);
    font-size: 0.8rem;
}

.form-actions {
    display: flex;
    gap: var(--spacing-sm);
    margin-top: var(--spacing-lg);
}
</style>
